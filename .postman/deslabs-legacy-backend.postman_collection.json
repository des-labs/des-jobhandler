{
	"info": {
		"_postman_id": "ffe9b981-1bc2-4b98-a001-42aca1c3c4c7",
		"name": "deslabs-legacy-backend",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "login",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "01d2b750-1ef4-4e02-9d58-3c5766616e17",
						"exec": [
							"var data = pm.response.json();",
							"//console.log(data.token);",
							"pm.environment.set(\"auth_token\", data.token);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "{{api_base_url}}/login?username={{username}}&password={{password}}&database=dessci",
					"host": [
						"{{api_base_url}}"
					],
					"path": [
						"login"
					],
					"query": [
						{
							"key": "username",
							"value": "{{username}}"
						},
						{
							"key": "password",
							"value": "{{password}}"
						},
						{
							"key": "database",
							"value": "dessci"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "dev/db/wipe",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "0061a010-069d-4c58-866e-17f022f08458",
						"exec": [
							"var data = pm.response.json();",
							"//console.log(data.token);",
							"pm.environment.set(\"auth_token\", data.token);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "{{api_base_url}}/dev/db/wipe?password={{db_passwd}}",
					"host": [
						"{{api_base_url}}"
					],
					"path": [
						"dev",
						"db",
						"wipe"
					],
					"query": [
						{
							"key": "password",
							"value": "{{db_passwd}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "job/submit (task: test)",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "9f65c71b-2446-4029-86d2-6bd086ab4af1",
						"exec": [
							"var data = pm.response.json();",
							"//console.log(data.token);",
							"pm.environment.set(\"job_id\", data.jobid);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{api_base_url}}/job/submit?username={{username}}&job=test&time=7",
					"host": [
						"{{api_base_url}}"
					],
					"path": [
						"job",
						"submit"
					],
					"query": [
						{
							"key": "username",
							"value": "{{username}}"
						},
						{
							"key": "job",
							"value": "test"
						},
						{
							"key": "time",
							"value": "7"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "job/submit (task: query, files)",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "9f65c71b-2446-4029-86d2-6bd086ab4af1",
						"exec": [
							"var data = pm.response.json();",
							"//console.log(data.token);",
							"pm.environment.set(\"job_id\", data.jobid);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{api_base_url}}/job/submit?username={{username}}&job=query&query=\"SELECT RA, DEC, MAG_AUTO_G, TILENAME from Y3_GOLD_2_2 sample(0.001)\"",
					"host": [
						"{{api_base_url}}"
					],
					"path": [
						"job",
						"submit"
					],
					"query": [
						{
							"key": "username",
							"value": "{{username}}"
						},
						{
							"key": "job",
							"value": "query"
						},
						{
							"key": "query",
							"value": "\"SELECT RA, DEC, MAG_AUTO_G, TILENAME from Y3_GOLD_2_2 sample(0.001)\""
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "job/submit (task: query, quick)",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "9f65c71b-2446-4029-86d2-6bd086ab4af1",
						"exec": [
							"var data = pm.response.json();",
							"//console.log(data.token);",
							"pm.environment.set(\"job_id\", data.jobid);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{api_base_url}}/job/submit?username={{username}}&job=query&query=\"SELECT RA, DEC, MAG_AUTO_G, TILENAME from Y3_GOLD_2_2 FETCH FIRST 5 ROWS ONLY\"&quick=true",
					"host": [
						"{{api_base_url}}"
					],
					"path": [
						"job",
						"submit"
					],
					"query": [
						{
							"key": "username",
							"value": "{{username}}"
						},
						{
							"key": "job",
							"value": "query"
						},
						{
							"key": "query",
							"value": "\"SELECT RA, DEC, MAG_AUTO_G, TILENAME from Y3_GOLD_2_2 FETCH FIRST 5 ROWS ONLY\""
						},
						{
							"key": "quick",
							"value": "true"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "job/submit (task: cutout)",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "da718185-85e7-4519-81f2-7d3a9cb46632",
						"exec": [
							"var data = pm.response.json();",
							"//console.log(data.token);",
							"pm.environment.set(\"job_id\", data.jobid);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{api_base_url}}/job/submit?username={{username}}&job=cutout&ra=0.1&dec=0.1&make_fits=gri&xsize=1.0&ysize=1.0&colors=g,r,i&release=Y6A1",
					"host": [
						"{{api_base_url}}"
					],
					"path": [
						"job",
						"submit"
					],
					"query": [
						{
							"key": "username",
							"value": "{{username}}"
						},
						{
							"key": "job",
							"value": "cutout"
						},
						{
							"key": "ra",
							"value": "0.1"
						},
						{
							"key": "dec",
							"value": "0.1"
						},
						{
							"key": "make_fits",
							"value": "gri"
						},
						{
							"key": "xsize",
							"value": "1.0"
						},
						{
							"key": "ysize",
							"value": "1.0"
						},
						{
							"key": "colors",
							"value": "g,r,i"
						},
						{
							"key": "release",
							"value": "Y6A1"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "job/status",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "9f65c71b-2446-4029-86d2-6bd086ab4af1",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "{{api_base_url}}/job/status?job-id=all",
					"host": [
						"{{api_base_url}}"
					],
					"path": [
						"job",
						"status"
					],
					"query": [
						{
							"key": "job-id",
							"value": "{{job_id}}",
							"disabled": true
						},
						{
							"key": "job-id",
							"value": "all"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "logout",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "9f65c71b-2446-4029-86d2-6bd086ab4af1",
						"exec": [
							"var data = pm.response.json();",
							"//console.log(data.token);",
							"pm.environment.set(\"job_id\", data.jobid);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"url": {
					"raw": "{{api_base_url}}/logout?username={{username}}",
					"host": [
						"{{api_base_url}}"
					],
					"path": [
						"logout"
					],
					"query": [
						{
							"key": "username",
							"value": "{{username}}"
						}
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{auth_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "eabee965-cb60-4ef6-ba9c-e984676594c6",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "7c716a22-daf8-4847-9b35-51886efd2313",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}